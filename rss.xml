<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>彩卷</title>
        <subtitle>天行健，君子以自强不息</subtitle>
        <icon>https://fuuuzzy.github.io/images/favicon.ico</icon>
        <link>https://fuuuzzy.github.io</link>
        <author>
          <name>ztingfg</name>
        </author>
        <description>编程爱好，擅长Java，学习分享，日常动态</description>
        <language>zh-CN</language>
        <pubDate>Wed, 13 Dec 2023 14:20:00 +0800</pubDate>
        <lastBuildDate>Wed, 13 Dec 2023 14:20:00 +0800</lastBuildDate>
        <category term="java" />
        <item>
            <guid isPermalink="true">https://fuuuzzy.github.io/version-control/git/</guid>
            <title>git常用命令</title>
            <link>https://fuuuzzy.github.io/version-control/git/</link>
            <category term="版本控制" scheme="https://fuuuzzy.github.io/categories/version-control/" />
            <category term="java" scheme="https://fuuuzzy.github.io/tags/java/" />
            <category term="linux" scheme="https://fuuuzzy.github.io/tags/linux/" />
            <category term="git" scheme="https://fuuuzzy.github.io/tags/git/" />
            <pubDate>Wed, 13 Dec 2023 14:20:00 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;git&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#git&#34;&gt;#&lt;/a&gt; Git&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;主要用来记录 Git 相关命令，忘记了可以过来找下对应的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;常用命令&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#常用命令&#34;&gt;#&lt;/a&gt; 常用命令&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令说明&lt;/th&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;初始化仓库&lt;/td&gt;
&lt;td&gt;git init&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;添加文件到本地仓库&lt;/td&gt;
&lt;td&gt;git add .(文件 name)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;添加文件描述信息&lt;/td&gt;
&lt;td&gt;git commit -m “first commit”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;添加远程仓库&lt;/td&gt;
&lt;td&gt;git remote add origin + 远程仓库地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;同步远程分支&lt;/td&gt;
&lt;td&gt;git pull origin master&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;线性合并远程仓库&lt;/td&gt;
&lt;td&gt;git pull --rebase origin master (无需 commit)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;推送到远程分支&lt;/td&gt;
&lt;td&gt;git push origin master &amp;lt;远程主机名&amp;gt; &amp;lt; 本地分支名 &amp;gt;:&amp;lt; 远程分支名 &amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;强制推送&lt;/td&gt;
&lt;td&gt;git push --force origin master&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;查看本地分支&lt;/td&gt;
&lt;td&gt;git branch -v &amp;lt;-a 查看所有分支&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;查看远程分支&lt;/td&gt;
&lt;td&gt;git branch -r&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;删除本地分支&lt;/td&gt;
&lt;td&gt;git branch -d branName&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;删除远程分支&lt;/td&gt;
&lt;td&gt;git push origin --delete master&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;删除远程仓库文件&lt;/td&gt;
&lt;td&gt;git rm -r --cached [filenam]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;切换分支&lt;/td&gt;
&lt;td&gt;git checkout main&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;创建本地分支&lt;/td&gt;
&lt;td&gt;git branch [name]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;拉取远程分支代码&lt;/td&gt;
&lt;td&gt;git fetch&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;合并分支&lt;/td&gt;
&lt;td&gt;git merge [name]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;创建并切换分支&lt;/td&gt;
&lt;td&gt;git checkout -b main&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;设置默认提交分支&lt;/td&gt;
&lt;td&gt;git push -u origin master &amp;lt;执行后下次推送可直接 git push&amp;gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;同步远程删除的分支&lt;/td&gt;
&lt;td&gt;git remote prune origin&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;更新远程分支信息&lt;/td&gt;
&lt;td&gt;git remote update origin --prune&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;查看提交记录&lt;/td&gt;
&lt;td&gt;git log&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;清除 Git 缓存密码&lt;/td&gt;
&lt;td&gt;git credential-manager uninstall&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;分支重命名&lt;/td&gt;
&lt;td&gt;git branch -m master main&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;重新验证账户密码&lt;/td&gt;
&lt;td&gt;git config --global credential.helper store&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;查看 git 配置信息&lt;/td&gt;
&lt;td&gt;git cofig --list 简写 git config -l&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;设置全局账户 / 邮箱&lt;/td&gt;
&lt;td&gt;git config --global (&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3VzZXIubmFtZQ==&#34;&gt;user.name&lt;/span&gt; &amp;quot;&amp;quot; )&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;设置当前仓库账户 / 邮箱&lt;/td&gt;
&lt;td&gt;git confit --local (&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3VzZXIubmFtZQ==&#34;&gt;user.name&lt;/span&gt; &amp;quot;&amp;quot; )&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;覆盖之前的提交信息&lt;/td&gt;
&lt;td&gt;git commit --amend -m&amp;quot;说明信息&amp;quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;回退版本，只回退 commit 信息&lt;/td&gt;
&lt;td&gt;git reset --soft&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;彻底回退，源码和 commit 均回退&lt;/td&gt;
&lt;td&gt;git reset --hard&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;远程仓库命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;查看远程仓库：git remote -v&lt;/li&gt;
&lt;li&gt;添加远程仓库：git remote add [name] [url]&lt;/li&gt;
&lt;li&gt;删除远程仓库：git remote rm [name]&lt;/li&gt;
&lt;li&gt;修改远程仓库：git remote set-url --push [name] [newUrl]&lt;/li&gt;
&lt;li&gt;拉取远程仓库：git pull [remoteName] [localBranchName]&lt;/li&gt;
&lt;li&gt;推送远程仓库：git push [remoteName] [localBranchName]&lt;/li&gt;
&lt;li&gt;提交暂存区到仓库: git commit -m [message]&lt;/li&gt;
&lt;li&gt;自动将修改文件添加到索引中；并显示提交信息: git commit -a&lt;/li&gt;
&lt;li&gt;追加提交，覆盖上次的提交信息: git commit --amend&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;分支 branch 命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;查看本地分支：git branch&lt;/li&gt;
&lt;li&gt;查看远程分支：git branch -r&lt;/li&gt;
&lt;li&gt;创建本地分支：git branch [name] ---- 注意新分支创建后不会自动切换为当前分支&lt;/li&gt;
&lt;li&gt;切换分支：git checkout [name]&lt;/li&gt;
&lt;li&gt;创建新分支并立即切换到新分支：$ git checkout -b [name]&lt;/li&gt;
&lt;li&gt;删除分支：git branch -d [name] ---- -d&lt;br /&gt;
 选项只能删除已经参与了合并的分支，对于未有合并的分支是无法删除的。如果想强制删除一个分支，可以使用 - D 选项&lt;/li&gt;
&lt;li&gt;合并分支：git merge [name] ---- 将名称为 [name] 的分支与当前分支合并&lt;/li&gt;
&lt;li&gt;创建远程分支 (本地分支 push 到远程)：$ git push origin [name]&lt;/li&gt;
&lt;li&gt;删除远程分支：git push origin --delete [branch_name]&lt;/li&gt;
&lt;li&gt;创建空的分支：(执行命令之前记得先提交你当前分支的修改，否则没有提交的内容会被强制删掉)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;版本 tag 相关命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;查看版本：git tag&lt;/li&gt;
&lt;li&gt;创建版本：git tag [name]&lt;/li&gt;
&lt;li&gt;删除版本：git tag -d [name]&lt;/li&gt;
&lt;li&gt;查看远程版本：git tag -r&lt;/li&gt;
&lt;li&gt;创建远程版本 (本地版本 push 到远程)：git push origin [name]&lt;/li&gt;
&lt;li&gt;删除远程版本：git push origin :refs/tags/[name]&lt;/li&gt;
&lt;li&gt;合并远程仓库的 tag 到本地：git pull origin --tags&lt;/li&gt;
&lt;li&gt;上传本地 tag 到远程仓库：git push origin --tags&lt;/li&gt;
&lt;li&gt;创建带注释的 tag：git tag -a [name] -m &#39;yourMessage&#39;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;子模块 (submodule) 相关操作命令&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;添加子模块：git submodule add [url] [path]&lt;/li&gt;
&lt;li&gt;初始化子模块：git submodule init ---- 只在首次检出仓库时运行一次就行&lt;/li&gt;
&lt;li&gt;更新子模块：git submodule update ---- 每次更新或切换分支后都需要运行一下&lt;/li&gt;
&lt;li&gt;删除子模块：（分 4 步走哦）&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;.gitignore 的文件规则&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在仓库根目录下创建名称为 “.gitignore” 的文件，写入不需要的文件夹名或文件，每个元素占一行&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;target	 	&lt;span class=&#34;token comment&#34;&gt;#忽略 dbg 文件和 dbg 目录 	&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;target/	 	&lt;span class=&#34;token comment&#34;&gt;#只忽略 target 文件，不忽略 dbg 目录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;target&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt;target/ 	&lt;span class=&#34;token comment&#34;&gt;#只忽略 dbg 文件不忽略 dgb 目录&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;/target  	&lt;span class=&#34;token comment&#34;&gt;#只忽略当前目录下的 target 文件和目录，子目录的 target 不在忽略范围内&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;bin		 &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;*.db&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#忽略规则&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;# 以 &#39;#&#39; 开始的行，被视为注释.&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt; * ？：代表任意的一个字符&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    * *：代表任意数目的字符&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    * &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt;ab&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;：必须不是此类型&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    * &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;ab,bb,cx&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;：代表ab,bb,cx中任一类型即可&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    * &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt;abc&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;：代表a,b,c中任一字符即可&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    * &lt;span class=&#34;token punctuation&#34;&gt;[&lt;/span&gt; ^abc&lt;span class=&#34;token punctuation&#34;&gt;]&lt;/span&gt;：代表必须不是a,b,c中任一字符&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;blockquote&gt;
&lt;p&gt;转载声明&lt;br /&gt;
本文部分命令转载自：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLm11YmFpLmxpbmsvMjAyMi8wNi8yOS9HaXQvR2l0&#34;&gt;https://blog.mubai.link/2022/06/29/Git/Git&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://fuuuzzy.github.io/serve-deploy/caddy/</guid>
            <title>初见Caddy</title>
            <link>https://fuuuzzy.github.io/serve-deploy/caddy/</link>
            <category term="服务器部署" scheme="https://fuuuzzy.github.io/categories/serve-deploy/" />
            <category term="java" scheme="https://fuuuzzy.github.io/tags/java/" />
            <category term="caddy" scheme="https://fuuuzzy.github.io/tags/caddy/" />
            <category term="linux" scheme="https://fuuuzzy.github.io/tags/linux/" />
            <pubDate>Tue, 10 Oct 2023 18:20:00 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;caddy的使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#caddy的使用&#34;&gt;#&lt;/a&gt; Caddy 的使用&lt;/h1&gt;
&lt;h2 id=&#34;简单的介绍&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#简单的介绍&#34;&gt;#&lt;/a&gt; 简单的介绍&lt;/h2&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jYWRkeXNlcnZlci5jb20v&#34;&gt;Caddy&lt;/span&gt;&lt;br /&gt;
 是一个轻量级的 HTTP/2 服务器，具有自动 HTTPS 功能，并且可以轻松配置。它支持多种协议，包括 HTTP/2、HTTP/1.1、WebSocket、gRPC 等，并且可以处理静态文件、反向代理、负载均衡、SSL/TLS 等任务。&lt;br /&gt;
基于配置简单的原因，在一些场景下可以平替 Nginx，更轻松的部署服务器。&lt;/p&gt;
&lt;h3 id=&#34;caddy的功能&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#caddy的功能&#34;&gt;#&lt;/a&gt; caddy 的功能&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;自动 HTTPS：Caddy 可以自动为网站提供 SSL/TLS 证书，无需手动配置。&lt;/li&gt;
&lt;li&gt;简单配置：Caddy 的配置文件非常简单，易于理解和修改。&lt;/li&gt;
&lt;li&gt;多协议支持：Caddy 支持多种协议，包括 HTTP/2、HTTP/1.1、WebSocket、gRPC 等。&lt;/li&gt;
&lt;li&gt;反向代理：Caddy 可以轻松配置反向代理，将请求转发到其他服务器。&lt;/li&gt;
&lt;li&gt;负载均衡：Caddy 可以配置负载均衡，将请求分发到多个服务器。&lt;/li&gt;
&lt;li&gt;静态文件处理：Caddy 可以处理静态文件，包括 HTML、CSS、JavaScript、图片等。&lt;/li&gt;
&lt;li&gt;日志记录：Caddy 可以记录访问日志，包括请求 URL、响应状态码、请求时间等。&lt;/li&gt;
&lt;li&gt;插件支持：Caddy 支持多种插件，可以扩展其功能。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;caddy跟nginx的对比&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#caddy跟nginx的对比&#34;&gt;#&lt;/a&gt; caddy 跟 nginx 的对比&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Caddy 的配置文件更简单，更易于理解和修改。&lt;/li&gt;
&lt;li&gt;Caddy 支持自动 HTTPS，无需手动配置。&lt;/li&gt;
&lt;li&gt;Caddy 的静态文件处理更简单，无需手动配置。&lt;/li&gt;
&lt;li&gt;Caddy 的日志记录更详细，包括请求 URL、响应状态码、请求时间等。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;性能对比：虽然 Caddy 在配置简单性和安全性方面具有优势，但在处理高并发请求时，Nginx 可能更为适合。&lt;br /&gt;
这是因为 Nginx 经过长时间的发展和优化，已经在生产环境中证明了其在处理大量并发连接时的稳定性和效率。&lt;br /&gt;
此外，Nginx 的社区支持和广泛的插件生态系统也是其受欢迎的原因之一，因此在处理一些小的并发量上，Caddy 更容易上手&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;caddy的使用只介绍linux下的使用&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#caddy的使用只介绍linux下的使用&#34;&gt;#&lt;/a&gt; caddy 的使用（只介绍 linux 下的使用）&lt;/h2&gt;
&lt;h3 id=&#34;linux安装&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#linux安装&#34;&gt;#&lt;/a&gt; linux 安装&lt;/h3&gt;
&lt;p&gt;Caddy 的安装非常简单，可以通过以下命令进行安装：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装 Caddy&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-y&lt;/span&gt; debian-keyring debian-archive-keyring apt-transport-https &lt;span class=&#34;token function&#34;&gt;curl&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;curl&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-1sLf&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;https://dl.cloudsmith.io/public/caddy/stable/gpg.key&#39;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; gpg &lt;span class=&#34;token parameter variable&#34;&gt;--dearmor&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-o&lt;/span&gt; /usr/share/keyrings/caddy-stable-archive-keyring.gpg&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;curl&lt;/span&gt; &lt;span class=&#34;token parameter variable&#34;&gt;-1sLf&lt;/span&gt; &lt;span class=&#34;token string&#34;&gt;&#39;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt&#39;&lt;/span&gt; &lt;span class=&#34;token operator&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;tee&lt;/span&gt; /etc/apt/sources.list.d/caddy-stable.list&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; update&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;apt&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;install&lt;/span&gt; caddy&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;默认情况下，caddy 的配置文件会在 /etc/caddy/Caddyfile, 没有后缀&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;启动 Caddy&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl start caddy --config&lt;span class=&#34;token operator&#34;&gt;&amp;lt;&lt;/span&gt;指定配置文件路径&lt;span class=&#34;token operator&#34;&gt;&gt;&lt;/span&gt; 默认会去/etc/caddy/Caddyfile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#或者&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; caddy run &lt;span class=&#34;token parameter variable&#34;&gt;--config&lt;/span&gt; 默认会去/etc/caddy/Caddyfile&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#查看启动状态&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl status caddy&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#停止 caddy&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl stop caddy &lt;span class=&#34;token operator&#34;&gt;||&lt;/span&gt; caddy stop&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#重启 caddy&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; systemctl restart caddy &lt;span class=&#34;token operator&#34;&gt;||&lt;/span&gt; caddy restart&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token comment&#34;&gt;#如果修改了配置文件，可以通过一下命令刷新配置&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token function&#34;&gt;sudo&lt;/span&gt; caddy reload&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;
&lt;p&gt;配置 Caddy (&lt;em&gt;&lt;strong&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuemhlLmluay9oYW5kYm9vay9jYWRkeTIvZG9jcy9pbnN0YWxsLmh0bWw=&#34;&gt;官方文档&lt;/span&gt;&lt;/strong&gt;&lt;/em&gt;)&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;文件服务&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;:10100 &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;       root * /opt/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;       file_server&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;文件预览服务&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;:10100 &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        root * /opt/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        file_server browse&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;反向代理&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;:10100&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        root * /opt/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        reverse_proxy /community/* eco.dameng.com&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        file_server browse&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;重定向&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;:10100&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    root * /opt/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    reverse_proxy /community/* eco.dameng.com&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    redir /info/*  https://eco.dameng.com&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;uri&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    file_server browse&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;重写&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;:10100&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    root * /opt/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    reverse_proxy /community/* eco.dameng.com&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    redir /info/*  https://eco.dameng.com&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;uri&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    rewrite /test1.html /test.html&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    file_server browse&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;单页面应用&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;example.com &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    encode &lt;span class=&#34;token function&#34;&gt;gzip&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    handle /api/* &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        reverse_proxy backend:8000&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    handle &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        root * /path/to/site&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        try_files &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;path&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt; /index.html&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        file_server&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;日志配置&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;figcaption data-lang=&#34;Bash&#34;&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td data-num=&#34;1&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;2&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     debug&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;3&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     log &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;4&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;        output &lt;span class=&#34;token function&#34;&gt;file&lt;/span&gt; /var/log/access.log&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;5&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;     &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;6&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;7&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;8&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    :10100&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;9&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;10&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;11&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      root * /opt/&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;12&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      reverse_proxy /community/* eco.dameng.com&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;13&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      redir /info/*  https://eco.dameng.com&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;uri&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;14&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;15&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      rewrite /test1.html /test.html&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;16&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;17&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;      file_server browse&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td data-num=&#34;18&#34;&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;    &lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt; ]]></description>
        </item>
        <item>
            <guid isPermalink="true">https://fuuuzzy.github.io/Java/java-kill/</guid>
            <title>记录排除java部署在服务器无故停止</title>
            <link>https://fuuuzzy.github.io/Java/java-kill/</link>
            <category term="Java" scheme="https://fuuuzzy.github.io/categories/Java/" />
            <category term="java" scheme="https://fuuuzzy.github.io/tags/java/" />
            <pubDate>Sat, 08 Jul 2023 14:20:00 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;前言&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#前言&#34;&gt;#&lt;/a&gt; 前言&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;  前两天部署了一个java程序在服务器，服务器是2核2G的，但每次部署后
  持续一段时间后，会无故进程停止了，没有任何日志记录，查看业务日志，java进程是正常退出的
  也通过添加JVM一些启动参数来生成错误日志以及堆转储日志，都没有发现问题
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;可能导致进程被杀掉的情况&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#可能导致进程被杀掉的情况&#34;&gt;#&lt;/a&gt; 可能导致进程被杀掉的情况&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;内存泄漏；&lt;/li&gt;
&lt;li&gt;进程所需的内存资源太大，对于 java 进程而言，除了 - Xmx 设置最大堆大小，还需要考虑元数据空间、堆外内存、直接内存的使用；&lt;/li&gt;
&lt;li&gt;其他进程需要占用较多的资源，但是被 OOM Killer 机制选中当前进程；&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;主要介绍linux的oom-killer机制&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#主要介绍linux的oom-killer机制&#34;&gt;#&lt;/a&gt; 主要介绍 Linux 的 OOM Killer 机制&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;Linux 内核有个机制叫OOM killer(Out Of Memory killer)，该机制会监控那些占用内存过大，尤其是瞬间占用内存很快的进程，然后防止内存耗尽而自动把该进程杀掉。内核检测到系统内存不足、挑选并杀掉某个进程的过程可以参考内核源代码linux/mm/oom_kill.c，当系统内存不足的时候，out_of_memory()被触发，然后调用select_bad_process()选择一个”bad”进程杀掉。如何判断和选择一个”bad进程呢？linux选择”bad”进程是通过调用oom_badness()，挑选的算法和想法都很简单很朴实：最bad的那个进程就是那个最占用内存的进程。
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;怎么避免oom-killer误杀我的业务进程&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#怎么避免oom-killer误杀我的业务进程&#34;&gt;#&lt;/a&gt; 怎么避免 OOM Killer 误杀我的业务进程？&lt;/h3&gt;
&lt;p&gt;避免 oom killer 的方案&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;直接修改 /proc//oom_score_adj 文件，将其置为 - 1000&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;以前是通过/proc//oom_score来控制的，但近年来新版linux已经使用oom_score_adj来代替旧版的oom_score
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;直接关闭&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class=&#34;language-aiignore&#34;&gt;关闭
echo &amp;quot;0&amp;quot; &amp;gt; /proc/sys/vm/oom-kill
激活
echo &amp;quot;1″ &amp;gt; /proc/sys/vm/oom-kill
&lt;/code&gt;&lt;/pre&gt;
 ]]></description>
        </item>
    </channel>
</rss>
